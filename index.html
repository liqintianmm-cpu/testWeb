<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Accessibility Input Assistant</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Accessibility Input Assistant</h1>
            <p>Voice, Gesture, and Text Input</p>
        </header>

        <main>
            <!-- Text Input Area -->
            <section class="input-section" id="text-section">
                <h2>Text Input</h2>
                <textarea id="text-input" 
                         placeholder="Enter text here..." 
                         aria-label="Text input area"
                         rows="6"></textarea>
                <button id="send-text" class="control-btn">Send to Model</button>
            </section>

            <!-- Test Paragraph Selection -->
            <section class="input-section" id="test-section">
                <h2>Test Paragraphs</h2>
                <div class="test-paragraphs">
                    <button class="test-btn" data-paragraph="0">Paragraph 1 </button>
                    <button class="test-btn" data-paragraph="1">Paragraph 2 </button>
                    <button class="test-btn" data-paragraph="2">Paragraph 3 </button>
                    <button class="test-btn" data-paragraph="3">Paragraph 4 </button>
                    <button class="test-btn" data-paragraph="4">Paragraph 5 </button>
                </div>
            </section>

            <!-- Voice Input Area -->
            <section class="input-section" id="voice-section">
                <h2>Voice Input</h2>
                <div class="voice-controls">
                    <button id="hold-to-record" class="voice-btn" aria-label="Hold to record">
                        Hold to Record
                    </button>
                </div>
            </section>

            <!-- Gesture Input Area -->
            <section class="input-section" id="gesture-section">
                <h2>Gesture Input</h2>
                <div class="gesture-area" id="gesture-area" tabindex="0" 
                     role="application" 
                     aria-label="Gesture input area, draw letter trajectories here">
                    <div class="gesture-instructions">
                        Draw letter trajectories in this area
                    </div>
                </div>
                <div class="gesture-controls">
                    <button id="clear-gesture" class="control-btn">Clear Trajectory</button>
                    <button id="submit-gesture" class="control-btn">Recognize Gesture</button>
                </div>
                <div class="gesture-result" id="gesture-result" aria-live="polite"></div>
            </section>

            <!-- Word Suggestions Display Area -->
            <section class="suggestions-section" id="suggestions-section">
                <h2>Word Suggestions</h2>
                <div class="suggestions" id="suggestions" role="list" aria-label="Word suggestions list">
                    <!-- Word suggestions will be displayed here -->
                </div>
            </section>

            <!-- Final Text Display Area -->
            <section class="output-section" id="output-section">
                <h2>Final Text</h2>
                <div class="final-text" id="final-text" aria-live="polite">
                    Your text will be displayed here...
                </div>
                <div class="output-controls">
                    <button id="clear-all" class="control-btn">Clear All</button>
                    <button id="copy-text" class="control-btn">Copy Text</button>
                    <button id="read-final" class="control-btn">Read Final Text</button>
                </div>
            </section>
        </main>
    </div>

    <!-- ✅ 在末尾加这段 -->
    <script>
    // 替换为你的 Colab 公网 API
    const API_URL = "https://chalkier-painstakingly-claire.ngrok-free.dev/predict";

    // 点击按钮发送文本到 Colab 模型
    document.getElementById("send-text").addEventListener("click", async () => {
        const text = document.getElementById("text-input").value;
        if (!text.trim()) {
            alert("Please enter some text first.");
            return;
        }
        try {
            const res = await fetch(API_URL, {
                method: "POST",
                headers: {"Content-Type": "application/json"},
                body: JSON.stringify({ input: text })
            });
            const data = await res.json();
            document.getElementById("final-text").innerText = data.result || "(No response)";
        } catch (err) {
            console.error(err);
            alert("Error connecting to backend. Check Colab or ngrok status.");
        }
    });
    </script>
</body>
</html>
